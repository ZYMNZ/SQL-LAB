-- COMPLEX VIEW

CREATE VIEW VW_STAFFOFBRANCH003
AS
SELECT S.* 
FROM STAFF S JOIN BRANCH B
ON S.BRANCHNO = B.BRANCHNO
WHERE S.BRANCHNO = 'B003';

CREATE OR REPLACE VIEW VW_STAFFOFBRANCH003 (EMPLOYEE_FNAME, EMPLOYEE_LNAME)
AS
SELECT S.FNAME, S.LNAME
FROM STAFF S JOIN BRANCH B
ON S.BRANCHNO = B.BRANCHNO
WHERE S.BRANCHNO = 'B003';


CREATE OR REPLACE VIEW VW_STAFFOFBRANCH003 --(NUMBER_OF_EMPLOYEE) WE ADD IT HERE OR AFTER COUNT(*)
AS
SELECT COUNT(*) AS NUMBER_OF_EMPLOYEE
FROM STAFF S JOIN BRANCH B
ON S.BRANCHNO = B.BRANCHNO
WHERE S.BRANCHNO = 'B003';

--SIMPLE VIEW
CREATE OR REPLACE VIEW VW_STAFFOFBRANCH003
AS
SELECT STAFFNO, FNAME, LNAME
FROM STAFF 
WHERE BRANCHNO = 'B003';

INSERT INTO VW_STAFFOFBRANCH003 VALUES ('B100', 'AAAAAA', 'BBBBBB');

--ALLOWS ONLY TO SELECT/READ
CREATE OR REPLACE VIEW VW_STAFFOFBRANCH003
AS
SELECT STAFFNO, FNAME, LNAME
FROM STAFF 
WHERE BRANCHNO = 'B003'
WITH READ ONLY;

--WITH A CHECK CONDITION 
CREATE OR REPLACE VIEW VW_STAFFOFBRANCH003
AS
SELECT STAFFNO, FNAME, LNAME, BRANCHNO
FROM STAFF 
WHERE BRANCHNO = 'B003' --THIS SHOULD BE SATISFIED WHEN INSERT/ UPDATE/ DELETE
WITH CHECK OPTION;
--IF THE BANCHNO WASN'T [B003] IT WONT WORK CZ OF THE CHECK OPTION
INSERT INTO VW_STAFFOFBRANCH003 VALUES ('C100', 'AAAAAA', 'BBBBBB', 'B003'); 





SELECT * FROM VW_STAFFOFBRANCH003;
